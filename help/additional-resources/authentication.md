---
title: 認証
description: SPF、DKIM、DMARCの各認証方法の詳細を説明します。
topics: Deliverability
kt: null
thumbnail: null
doc-type: article
activity: understand
team: ACS
exl-id: 03609139-b39b-4051-bcde-9ac7c5358b87
source-git-commit: 68c403f915287e1a50cd276b67b3f48202f45446
workflow-type: tm+mt
source-wordcount: '762'
ht-degree: 52%

---

# 認証

## SPF {#spf}

SPF（Sender Policy Framework）は、E メール認証標準で、ドメインの所有者がドメインの代わりに E メールを送信できる E メールサーバーを指定できます。この標準は、E メールの「Return-Path」ヘッダー（「Envelope From」アドレスとも呼ばれる）のドメインを使用します。

>[!NOTE]
>
>[この外部ツール](https://www.kitterman.com/spf/validate.html)を使用して、SPFレコードを検証できます。

SPF は、E メールで使用されているドメイン名が偽装されていないことをある程度確認できる技術です。あるドメインからメッセージが受信されると、そのドメインの DNS サーバーに対して問い合わせが実行されます。その応答は、このドメインから E メールを送信する権限がどのサーバーにあるかを記述した短いレコード（SPF レコード）になります。このレコードを変更する手段がドメインの所有者にしかないと仮定すると、送信者のアドレス（少なくとも「@」の右側の部分）の偽装はこの技術により防止できると考えることができます。

最終的な[RFC 4408仕様](https://www.rfc-editor.org/info/rfc4408)では、メッセージの2つの要素を使用して、送信者と見なされるドメインを決定します。SMTPの「HELO」（または「EHLO」）コマンドで指定されたドメインと、「Return-Path」（または「MAIL FROM」）ヘッダーのアドレスで指定されたドメイン（バウンスアドレス）。 様々な事項を検討することにより、これらの値の一方のみを考慮に入れることが可能になります。両方のソースで指定されているドメインが必ず同じになるようにすることをお勧めします。

SPF の確認により、送信者ドメインの有効性が次のように評価されます。

* **なし**:評価を実行できませんでした。
* **中立**:問い合わせられたドメインでは評価が有効になっていません。
* **パス**:ドメインは真正なものと見なされます。
* **失敗**:ドメインは偽装されているので、メッセージを拒否する必要があります。
* **SoftFail**:ドメインはおそらく偽装されていますが、この結果だけに基づいてメッセージを拒否すべきではありません。
* **TempError**：一時的なエラーで評価が停止しました。メッセージを拒否することもできます。
* **PermError**：ドメインの SPF レコードが無効です。

DNS サーバーのレベルで作成されたレコードを考慮するのに最大 48 時間かかる可能性があることに注意する必要があります。この遅延は、受信サーバーの DNS キャッシュの更新頻度によって異なります。

## DKIM {#dkim}

DKIM(DomainKeys Identified Mail)認証はSPFの後継ツールです。 公開鍵暗号化を使用して、受信側のEメールサーバーが、送信元の人または団体によって送信されたこと、およびメッセージの内容が最初の送信時刻（およびDKIM「署名済み」）と受信時刻の間に変更されたことを確認できます。 この標準は、通常、「From」または「Sender」ヘッダーのドメインを使用します。

DKIM は、Yahoo! の DomainKeys と Cisco の Identified Internet Mail という 2 つの送信ドメイン認証方式を組み合わせて策定されたもので、送信者ドメインの信憑性を確認し、メッセージの整合性を保証するために使用されます。

DKIM が **DomainKeys** 認証方式の後継となりました。

DKIM を使用するには、次のように、いくつかの前提条件を満たす必要があります。

* **セキュリティ**:暗号化はDKIMの重要な要素です。DKIMのセキュリティレベルを確保するために、1024bがベストプラクティスとして推奨される暗号化サイズです。 これより小さいDKIMキーは、大部分のアクセスプロバイダーでは有効と見なされません。
* **レピュテーション**:レピュテーションはIPやドメインに基づきますが、より透明性の低いDKIMセレクターも考慮に入れるべき重要な要素です。セレクターの選択は重要です。誰でも使用でき、したがって評判が弱い「デフォルト」を維持するのを避けます。 **顧客維持／獲得用の通信**&#x200B;と認証には、別のセレクターを実装する必要があります。

[この節](/help/additional-resources/acc-technical-recommendations.md#dkim-acc)のCampaign Classicを使用する際のDKIMの前提条件について詳しくは、こちらを参照してください。

## DMARC {#dmarc}

DMARC（Domain-based Message Authentication, Reporting and Conformance）は、最新の E メール認証です。SPF と DKIM 認証の両方に基づいて E メールの合否を判定します。DMARCは、次の2つの重要な方法で独自で強力です。

* 適合性 — 送信者は、認証に失敗したメッセージに対して何を行うかに関してISPに指示できます(例：受け入れないでください)。
* レポート - DMARC 認証に失敗したすべてのメッセージを、それぞれに使用された「From」ドメインおよび IP アドレスと共に詳細なレポートを送信者に提供します。これにより、認証に失敗し、ある種の「修正」（IPアドレスをSPFレコードに追加するなど）が必要な正当なEメールを、Eメールドメインのフィッシング攻撃のソースと横行率と共に識別できます。

>[!NOTE]
>
>DMARC は、[250ok](https://250ok.com/) が生成したレポートを活用できます。
