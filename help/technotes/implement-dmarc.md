---
title: メッセージ識別 (BIMI) のための Gmail のブランドインジケーターの実装
description: BIMI の実装方法を学ぶ
topics: Deliverability
role: Admin
level: Beginner
source-git-commit: 5ac5bc90b5a9bf3ce9b390821476c7222983b818
workflow-type: tm+mt
source-wordcount: '1222'
ht-degree: 1%

---

# 実装方法 [!DNL Domain-based Message Authentication, Reporting and Conformance] (DMARC)

このドキュメントの目的は、読者に電子メール認証方法 DMARC に関する詳細な情報を提供することです。 DMARC の仕組みと様々なポリシーオプションを説明することで、読者は DMARC が E メールの配信品質に与える影響をより深く理解できます。

## DMARC とは {#about}

ドメインベースのメッセージ認証、レポートおよび準拠は、ドメイン所有者がドメインを不正使用から保護できる電子メール認証方法です。 また、DMARC は、電子メール認証ステータスに関するフィードバックを提供し、送信者が認証に失敗した電子メールに対して何が起こるかを制御することもできます。 これには、実装されている DMARC ポリシーに応じて、メールを監視、強制隔離、拒否するオプションが含まれます。

DMARC には次の 3 つのポリシーオプションがあります。

* **モニタ (p=none):** メールボックスプロバイダーまたは ISP に対し、通常メッセージに対して行う操作を何でも実行するように指示します。
* **強制隔離（p=強制隔離） :** DMARC を受信者のスパムフォルダーまたは迷惑メールフォルダーに渡さないメールを配信するよう、メールボックスプロバイダーまたは ISP に指示します。
* **却下（p=却下） :** DMARC を渡さずにバウンスに至ったメールをブロックするように、メールボックスプロバイダーまたは ISP に指示します。

## DMARC の仕組み {#how}

SPF と DKIM は、E メールをドメインに関連付け、連携して E メールを認証するために使用されます。 DMARC はこの 1 つの手順をさらに進め、DKIM および SPF によってチェックされたドメインと一致させ、スプーフィングを防ぐのに役立ちます。 DMARC を渡すには、メッセージが SPF または DKIM を渡す必要があります。 これらの両方の認証が失敗した場合、DMARC は失敗し、選択した DMARC ポリシーに従って電子メールが配信されます。

>[!NOTE]
>
>DMARC では、「From」と「Return-Path」アドレスの間の位置揃えが必要です。

## DMARC を実装する必要があるのはなぜですか？ {#why}

DMARC はオプションです。必須ではありませんが、無料です。E メールの受信者は E メールの認証を容易に識別でき、配信が向上する可能性があります。 DMARC の主なメリットの 1 つは、SPF や DKIM に失敗したメッセージに関するレポートを提供することです。 また、送信者は、これらの認証方法のいずれも通過しないメールの処理をある程度制御できます。 送信者は、DMARC レポートを通じて、DMARC に失敗したメッセージを目に見えるようになり、さらなるエラーを軽減するための手順を実行できます。

>[!NOTE]
>
>BIMI を実装する場合は、p=quarantine または p=reject DMARC ポリシーが必要です。

## DMARC の実装のベストプラクティス {#best-practice}

DMARC はオプションなので、ESP のプラットフォームではデフォルトで設定されません。 DMARC レコードを機能させるには、ドメインの DNS に DMARC レコードを作成する必要があります。 また、DMARC レポートを組織内のどこに送信するかを示すために、選択した電子メールアドレスが必要です。 ベストプラクティスとして、DMARC の潜在的な影響を DMARC が把握できるように、DMARC ポリシーを p=none から p=quarantine にエスカレートし、p=reject にエスカレートすることで、DMARC の実装を徐々に展開することをお勧めします。

1. 受け取り、使用したフィードバックを分析します (p=none)。これは、認証に失敗したメッセージに対して何のアクションも実行せず、送信者に電子メールレポートを送信するように受信者に指示します。 また、正当なメッセージが認証に失敗する場合は、SPF/DKIM の問題を確認して修正します。
1. SPF と DKIM がすべての正当な E メールの認証を渡しているかどうかを確認し、ポリシーを (p=quarantine) に移動します。これは、受信側の E メールサーバーに、認証に失敗した E メールを強制隔離するよう指示します（通常は、スパムフォルダーにメッセージを配置します）。
1. ポリシーを (p=reject) に調整します。 p= reject ポリシーは、認証に失敗したドメインの E メールを受信者に対して完全に拒否（バウンス）するように指示します。 このポリシーを有効にすると、ドメインで 100%認証された電子メールのみがインボックスに配置される可能性もあります。

   >[!NOTE]
   >
   >このポリシーを使用する際は注意が必要です。また、お客様の組織に適しているかどうかを判断してください。

## DMARC レポート {#reporting}

DMARC は、SPF/DKIM に失敗した E メールに関するレポートを受け取る機能を備えています。 送信者が DMARC ポリシーの RUA/RUF タグを通じて受信できる認証プロセスの一環として、ISP サービス担当者が生成するレポートには、次の 2 種類があります。

* **集計レポート (RUA):** GDPR に影響を与える PII（個人を特定できる情報）は含まれません。
* **フォレンジックレポート (RUF):** GDPR に影響を受ける電子メールアドレスが含まれています。 を利用する前に、GDPR に準拠する必要がある情報の処理方法を内部で確認することをお勧めします。

これらのレポートの主な使用方法は、スプーフィングを試行した電子メールの概要を受け取ることです。 これらは、サードパーティのツールを通じて最もよく消化される、非常に技術的なレポートです。 DMARC の監視を専門とする企業は次のとおりです。

* [ValiMail](https://www.valimail.com/products/#automated-delivery)
* [阿賀里](https://www.agari.com/)
* [ドマルシア語](https://dmarcian.com/)
* [配達確認](https://www.proofpoint.com/us)

### DMARC レコードの例 {#example}

```
v=DMARC1; p=reject; fo=1; rua=mailto:dmarc_rua@emaildefense.proofpoint.com;ruf=mailto:dmarc_ruf@emaildefense.proofpoint.co
```

## DMARC タグとその機能 {#tags}

DMARC レコードには、DMARC タグと呼ばれる複数のコンポーネントが含まれます。 各タグには、DMARC の特定の側面を指定する値が含まれます。

| タグ名 | 必須／オプション | 関数 | 例 | デフォルト値 |
|  ---  |  ---  |  ---  |  ---  |  ---  |
| v | 必須 | この DMARC タグは、バージョンを指定します。 現時点では 1 つのバージョンのみなので、v=DMARC1 の固定値になります。 | V=DMARC1 DMARC1 | DMARC1 |
| p | 必須 | 選択された DMARC ポリシーを表示し、認証チェックに失敗したメールをレポート、強制隔離、または拒否するよう受信者に指示します。 | p=なし、強制隔離または却下 | - |
| ～に対して | オプション | ドメイン所有者がレポートオプションを指定できるようにします。 | 0：すべてが失敗した場合にレポートを生成<br/>1：何か失敗した場合にレポートを生成<br/>d:DKIM が失敗した場合にレポートを生成<br/>s:SPF に失敗した場合にレポートを生成する | 1 （DMARC レポートに推奨） |
| pct | オプション | フィルタリングの対象となるメッセージの割合を示します。 | pct=20 | 100 |
| rua | オプション（推奨） | 集計レポートが配信される場所を識別します。 | `rua=mailto:aggrep@example.com` | - |
| ruf | オプション（推奨） | 法医学レポートがどこに配信されるかを識別します。 | `ruf=mailto:authfail@example.com` | - |
| sp | オプション | 親ドメインのサブドメインに対して DMARC ポリシーを指定します。 | sp=reject | - |
| アドキム | オプション | Strict (s) または Relaxed (r) のいずれかです。 緩和された整列とは、DKIM 署名で使用されるドメインが「送信者」アドレスのサブドメインになる可能性があることを意味します。 厳密に整列させると、DKIM 署名で使用されるドメインは、送信元アドレスで使用されるドメインと完全に一致する必要があります。 | adkim=r | r |
| aspf | オプション | Strict (s) または Relaxed (r) のいずれかです。 緩和された配置とは、ReturnPath ドメインが From Address のサブドメインになることを意味します。 厳密に整列すると、Return-Path ドメインは From アドレスと完全に一致する必要があります。 | aspf=r | r |

## DMARC &amp; Adobe Campaign {#campaign}

DMARC エラーの一般的な原因は、「From」と「Errors-To」または「Return-Path」アドレスの間のずれです。 この問題を回避するには、DMARC を設定する際に、配信テンプレートの「From」および「Errors-To」アドレス設定を再度確認することをお勧めします。

1. 配信テンプレート内で、「送信者」アドレスとして現在設定されているアドレスを確認します。

   ![](../assets/dmarc1.png)

1. ここから、「プロパティ」を選択して、配信テンプレートをさらに編集できます。 このウィンドウで「SMTP」を選択し、「プラットフォームに対して定義されたデフォルトのエラーアドレスを使用」を選択した場合はオフにします。 Adobe Campaignの配信テンプレートでは、デフォルトでこのチェックボックスがオンになっています。 デフォルトのエラーアドレスは、この配信テンプレートの送信元アドレスに関連付けられているアドレスではない可能性があります。

   ![](../assets/dmarc2.png)

1. このチェックボックスをオフにすると、テキストフィールドが表示され、送信元アドレスで設定したものと同じドメインを使用する一意のエラーアドレスを入力できます。

   ![](../assets/dmarc3.png)

これらの変更を保存すると、正しいドメイン配置を使用して DMARC の実装を進めることができます。

## 役に立つリンク {#links}

* [DMARC.org](https://dmarc.org/){target="_blank"}
* [M3AAWG メール認証](https://www.m3aawg.org/sites/default/files/document/M3AAWG_Email_Authentication_Update-2015.pdf){target="_blank"}
